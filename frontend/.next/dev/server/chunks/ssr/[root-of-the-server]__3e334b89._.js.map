{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/pages/index.module.css [ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"agendaButton\": \"index-module__STTVBW__agendaButton\",\n  \"altLabel\": \"index-module__STTVBW__altLabel\",\n  \"bottomContent\": \"index-module__STTVBW__bottomContent\",\n  \"bottomDock\": \"index-module__STTVBW__bottomDock\",\n  \"bottomDockActive\": \"index-module__STTVBW__bottomDockActive\",\n  \"bottomStart\": \"index-module__STTVBW__bottomStart\",\n  \"bottomStartHidden\": \"index-module__STTVBW__bottomStartHidden\",\n  \"chatFieldGroup\": \"index-module__STTVBW__chatFieldGroup\",\n  \"chatHistory\": \"index-module__STTVBW__chatHistory\",\n  \"chatInput\": \"index-module__STTVBW__chatInput\",\n  \"chatInputShell\": \"index-module__STTVBW__chatInputShell\",\n  \"chatLabel\": \"index-module__STTVBW__chatLabel\",\n  \"chatPlaceholder\": \"index-module__STTVBW__chatPlaceholder\",\n  \"chatShell\": \"index-module__STTVBW__chatShell\",\n  \"chatShellActive\": \"index-module__STTVBW__chatShellActive\",\n  \"chatVisible\": \"index-module__STTVBW__chatVisible\",\n  \"errorText\": \"index-module__STTVBW__errorText\",\n  \"floatingSymbol\": \"index-module__STTVBW__floatingSymbol\",\n  \"heroActivated\": \"index-module__STTVBW__heroActivated\",\n  \"heroCard\": \"index-module__STTVBW__heroCard\",\n  \"heroSpacer\": \"index-module__STTVBW__heroSpacer\",\n  \"heroText\": \"index-module__STTVBW__heroText\",\n  \"heroTitle\": \"index-module__STTVBW__heroTitle\",\n  \"infopointPage\": \"index-module__STTVBW__infopointPage\",\n  \"messageAssistant\": \"index-module__STTVBW__messageAssistant\",\n  \"messageBubble\": \"index-module__STTVBW__messageBubble\",\n  \"messageRow\": \"index-module__STTVBW__messageRow\",\n  \"messageSources\": \"index-module__STTVBW__messageSources\",\n  \"messageUser\": \"index-module__STTVBW__messageUser\",\n  \"pageHeader\": \"index-module__STTVBW__pageHeader\",\n  \"pageHeaderVisible\": \"index-module__STTVBW__pageHeaderVisible\",\n  \"pageStarted\": \"index-module__STTVBW__pageStarted\",\n  \"quickActions\": \"index-module__STTVBW__quickActions\",\n  \"secondaryActions\": \"index-module__STTVBW__secondaryActions\",\n  \"sendButton\": \"index-module__STTVBW__sendButton\",\n  \"symbolDocked\": \"index-module__STTVBW__symbolDocked\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///home/daniele/infopoint_ai/frontend/src/pages/index.js"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport styles from \"./index.module.css\";\n\nconst InfoPointPage = () => {\n  const [assistantStarted, setAssistantStarted] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [chatHistory, setChatHistory] = useState([]);\n  const [isSending, setIsSending] = useState(false);\n  const [error, setError] = useState(\"\");\n  const chatPaneRef = useRef(null);\n  const chatEndRef = useRef(null);\n\n  const assistantEndpoint =\n    process.env.NEXT_PUBLIC_ASSISTANT_API ?? \"http://localhost:8000/api/assistant\";\n\n  const pageClasses = useMemo(\n    () =>\n      [styles.infopointPage, assistantStarted ? styles.pageStarted : \"\"]\n        .join(\" \")\n        .trim(),\n    [assistantStarted]\n  );\n\n  const heroClasses = useMemo(\n    () =>\n      [styles.heroCard, assistantStarted ? styles.heroActivated : \"\"]\n        .join(\" \")\n        .trim(),\n    [assistantStarted]\n  );\n\n  const hasConversation = chatHistory.length > 0;\n\n  useEffect(() => {\n    if (chatPaneRef.current) {\n      chatPaneRef.current.scrollTop = chatPaneRef.current.scrollHeight;\n    }\n    if (chatEndRef.current) {\n      chatEndRef.current.scrollIntoView({ behavior: \"smooth\", block: \"end\" });\n    }\n  }, [chatHistory, assistantStarted]);\n\n  const handleStartAssistant = () => {\n    if (!assistantStarted) {\n      setAssistantStarted(true);\n    }\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    if (!assistantStarted || !message.trim()) {\n      return;\n    }\n\n    setIsSending(true);\n    setError(\"\");\n    const userQuestion = message.trim();\n\n    try {\n      setChatHistory((prev) => [\n        ...prev,\n        {\n          id: `user-${Date.now()}`,\n          role: \"user\",\n          content: userQuestion,\n        },\n      ]);\n      setMessage(\"\");\n\n      const response = await fetch(assistantEndpoint, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ question: userQuestion }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data?.error || data?.message || \"Errore inatteso\");\n      }\n\n      setChatHistory((prev) => [\n        ...prev,\n        {\n          id: `assistant-${Date.now()}`,\n          role: \"assistant\",\n          content: data?.answer ?? \"Non ho trovato informazioni pertinenti.\",\n          sources: data?.sources ?? [],\n        },\n      ]);\n    } catch (fetchError) {\n      setError(fetchError.message);\n    } finally {\n      setIsSending(false);\n    }\n  };\n\n  return (\n    <div className={pageClasses}>\n      <header\n        className={`${styles.pageHeader} ${\n          hasConversation ? styles.pageHeaderVisible : \"\"\n        }`}\n      >\n        <h1>Info Point AI</h1>\n      </header>\n      <div className={heroClasses}>\n        <h1 className={styles.heroTitle}>Info Point AI</h1>\n        <p className={styles.heroText}>\n          {assistantStarted\n            ? \"Chiedi qualcosa al nostro assistente AI. Inserisci la tua domanda qui sotto e premi invio.\"\n            : \"Scopri l'evento e fai domande al nostro assistente AI. Premi il simbolo per iniziare la conversazione.\"}\n        </p>\n        {assistantStarted && (\n          <div className={styles.quickActions}>\n            <button type=\"button\" className={styles.agendaButton}>\n              Consulta l&apos;agenda\n            </button>\n          </div>\n        )}\n        <section\n          className={`${styles.chatShell} ${\n            assistantStarted ? styles.chatShellActive : \"\"\n          }`}\n        >\n          <div className={styles.chatHistory} ref={chatPaneRef}>\n            {chatHistory.length === 0 ? (\n              <div className={styles.chatPlaceholder}>\n                <p>La conversazione con l&apos;assistente comparir√† qui.</p>\n              </div>\n            ) : (\n              chatHistory.map((entry) => (\n                <div\n                  key={entry.id}\n                  className={`${styles.messageRow} ${\n                    entry.role === \"user\"\n                      ? styles.messageUser\n                      : styles.messageAssistant\n                  }`}\n                >\n                  <div className={styles.messageBubble}>\n                    <p>{entry.content}</p>\n                    {entry.role === \"assistant\" &&\n                      entry.sources &&\n                      entry.sources.length > 0 && (\n                        <ul className={styles.messageSources}>\n                          {entry.sources.map((source) => (\n                            <li key={`${entry.id}-${source.id}`}>{source.title}</li>\n                          ))}\n                        </ul>\n                      )}\n                  </div>\n                </div>\n              ))\n            )}\n            <div ref={chatEndRef} />\n          </div>\n        </section>\n        {error && <p className={styles.errorText}>{error}</p>}\n      </div>\n\n      <button\n        type=\"button\"\n        className={`${styles.floatingSymbol} ${\n          assistantStarted ? styles.symbolDocked : \"\"\n        }`}\n        onClick={handleStartAssistant}\n        aria-label=\"Avvia l&apos;assistente AI\"\n      >\n        i\n      </button>\n      {!assistantStarted && (\n        <div className={styles.secondaryActions}>\n          <p className={styles.altLabel}>Altrimenti:</p>\n          <button type=\"button\" className={styles.agendaButton}>\n            Consulta l&apos;agenda\n          </button>\n        </div>\n      )}\n\n      <div\n        className={`${styles.bottomDock} ${\n          assistantStarted ? styles.bottomDockActive : \"\"\n        }`}\n      >\n        <div className={styles.bottomContent}>\n          <form\n            className={`${styles.chatInputShell} ${\n              assistantStarted ? styles.chatVisible : \"\"\n            }`}\n            onSubmit={handleSubmit}\n          >\n            <label className={styles.chatLabel} htmlFor=\"prompt-input\">\n              Invia il tuo messaggio\n            </label>\n            <div className={styles.chatFieldGroup}>\n              <input\n                type=\"text\"\n                id=\"prompt-input\"\n                name=\"prompt\"\n                value={message}\n                placeholder=\"Scrivi la tua domanda per l&apos;assistente...\"\n                className={styles.chatInput}\n                onChange={(event) => setMessage(event.target.value)}\n                autoFocus={assistantStarted}\n                disabled={!assistantStarted || isSending}\n              />\n              <button\n                type=\"submit\"\n                className={styles.sendButton}\n                disabled={!assistantStarted || isSending || !message.trim()}\n              >\n                {isSending ? \"Invio...\" : \"Invia\"}\n              </button>\n            </div>\n          </form>\n          <button\n            type=\"button\"\n            className={`${styles.bottomStart} ${\n              assistantStarted ? styles.bottomStartHidden : \"\"\n            }`}\n            onClick={handleStartAssistant}\n          >\n            Avvia chat\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default InfoPointPage;\n"],"names":[],"mappings":"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"}}]
}